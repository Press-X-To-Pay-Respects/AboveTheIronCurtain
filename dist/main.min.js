(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./src/js/main.js":[function(require,module,exports){
'use strict';

var game = new Phaser.Game(800, 800, Phaser.AUTO, 'atic-game');

window.playerState = {
    currentLevel: 'Game'
};

game.state.add('Boot', require('./states/boot'));
game.state.add('Splash', require('./states/splash'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Menu', require('./states/menu'));
game.state.add('Game', require('./states/game'));

game.state.start('Boot');
},{"./states/boot":"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\boot.js","./states/game":"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\game.js","./states/menu":"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\menu.js","./states/preloader":"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\preloader.js","./states/splash":"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\splash.js"}],"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\entities\\cube.js":[function(require,module,exports){
/*
Defines a cube module.
*/

var Cube = function (game, x, y) {
    Phaser.Sprite.call(this, game, x, y, 'testsprite');
    game.add.existing(this);
    this.north = undefined;
    this.east = undefined;
    this.south = undefined;
    this.west = undefined;
    this.root = false;
    this.DIR = {NORTH: 0, EAST: 1, SOUTH: 2, WEST: 3};
};

Cube.prototype = Object.create(Phaser.Sprite.prototype);
Cube.prototype.constructor = Cube;

/**
 * Automatically called by World.update
 */
Cube.prototype.update = function() {
};

Cube.prototype.addConnection = function(other) {
  var offset = 2;
  var thisSide = this.relativeSide(this.body, other);
  var otherSide = this.relativeSide(other, this.body);
  if (this.getSide(thisSide)) {
     return;
  }
  if (other.sprite.getSide(otherSide)) {
     return;
  }
  switch (thisSide) {
     case this.DIR.NORTH:
     this.game.physics.p2.createLockConstraint(this.body, other, [0, this.width + offset]);
     this.north = other.sprite;
     break;
     case this.DIR.EAST:
     this.game.physics.p2.createLockConstraint(this.body, other, [-this.width - offset, 0]);
     this.east = other.sprite;
     break;
     case this.DIR.SOUTH:
     this.game.physics.p2.createLockConstraint(this.body, other, [0, -this.width - offset]);
     this.south = other.sprite;
     break;
     case this.DIR.WEST:
     this.game.physics.p2.createLockConstraint(this.body, other, [this.width + offset, 0]);
     this.west = other.sprite;
     break;
  }
  switch (otherSide) {
     case this.DIR.NORTH:
     other.sprite.north = this;
     break;
     case this.DIR.EAST:
     other.sprite.east = this;
     break;
     case this.DIR.SOUTH:
     other.sprite.south = this;
     break;
     case this.DIR.WEST:
     other.sprite.west = this;
     break;
  }
};

Cube.prototype.relativeSide = function(thisBody, otherBody) {
  var thisPoint = new Phaser.Point(thisBody.x, thisBody.y);
  var otherPoint = new Phaser.Point(otherBody.x, otherBody.y);
  var angleToOther = Phaser.Point.angle(thisPoint, otherPoint);
  if (angleToOther < 0) { // fix dumb part of Phaser.Point.angle()
     angleToOther = 2 * Math.PI + angleToOther;
  }
  angleToOther = (angleToOther + 3/2 * Math.PI) % (2 * Math.PI); // rotate 90 d clockwise
  var diffAngle = angleToOther - thisBody.rotation;
   if (diffAngle < 1 / 4 * Math.PI || diffAngle > 7 / 4 * Math.PI) { // north
     return this.DIR.NORTH;
  } else if (diffAngle >= 1 / 4 * Math.PI && diffAngle < 3 / 4 * Math.PI) { // east
     return this.DIR.EAST;
  } else if (diffAngle >= 3 / 4 * Math.PI && diffAngle < 5 / 4 * Math.PI) { // south
     return this.DIR.SOUTH;
  } else if (diffAngle >= 5 / 4 * Math.PI && diffAngle < 7 / 4 * Math.PI) { // west
     return this.DIR.WEST;
  }
};

Cube.prototype.cubeCollide = function(other) {
   if (other === null || this.prototype !== other.prototype) {
      return;
   }
   if (this.myRoot) {
      if (other.sprite.myRoot && this.myRoot === other.sprite.myRoot) {
         return;
      }
   } else {
      if (this.root) {
         this.myRoot = this.name;
      }
   }
   if (this.hasRoot() && !other.sprite.hasRoot()) {
      this.addConnection(other);
   }
};

Cube.prototype.hasRoot = function() {
  if (this.root) {
     return true;
  }
  var visited = [];
  visited.push(this);
  if (this.north && this.hasRootR(visited, this.north)) {
    return true;  
  }
  if (this.east && this.hasRootR(visited, this.east)) {
    return true;  
  }
  if (this.south && this.hasRootR(visited, this.south)) {
    return true;  
  }
  if (this.west && this.hasRootR(visited, this.west)) {
    return true;
  }
};

Cube.prototype.hasRootR = function(visited, cur) {
   if (cur.root) {
      if (!this.myRoot) {
         this.myRoot = cur.name;
      }
      return true;
   }
   visited.push(cur);
   if (cur.north && !this.contains(visited, cur.north) && this.hasRootR(visited, cur.north)) {
    return true;  
  }
  if (cur.east && !this.contains(visited, cur.east) && this.hasRootR(visited, cur.east)) {
    return true;  
  }
  if (cur.south && !this.contains(visited, cur.south) && this.hasRootR(visited, cur.south)) {
    return true;  
  }
  if (cur.west && !this.contains(visited, cur.west) && this.hasRootR(visited, cur.west)) {
    return true;  
  }
};

Cube.prototype.contains = function (array, obj) {
  for (var i = 0; i < array.length; i++) {
      if (array[i] === obj) {
         return true;
      }
  }  
   return false;
};

Cube.prototype.getSide = function(side) {
   switch (side) {
     case this.DIR.NORTH:
     return this.north;
     case this.DIR.EAST:
     return this.east;
     case this.DIR.SOUTH:
     return this.south;
     case this.DIR.WEST:
     return this.west;
  }
  return undefined;
};

Cube.prototype.toString = function() {
   var string = '';
   string += this.concat('name', this.name);
   string += this.concat('isRoot', this.root);
   string += this.concat('myRoot', this.myRoot);
   string += this.concat('north', this.north !== undefined);
   string += this.concat('east', this.east !== undefined);
   string += this.concat('south', this.south !== undefined);
   string += this.concat('west', this.west !== undefined);
   return string;
};

Cube.prototype.concat = function(string, val) {
   return string + ': ' + val + '\n';
};

module.exports = Cube;















},{}],"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\boot.js":[function(require,module,exports){
var Boot = function () {};

module.exports = Boot;

Boot.prototype = {

  preload: function () {
    this.load.image('preloader', 'assets/preloader.gif');
  },

  create: function () {
    this.game.input.maxPointers = 1;

    if (this.game.device.desktop) {
      this.game.stage.scale.pageAlignHorizontally = true;
    } else {
      this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
      this.game.scale.minWidth =  480;
      this.game.scale.minHeight = 260;
      this.game.scale.maxWidth = 640;
      this.game.scale.maxHeight = 480;
      this.game.scale.forceLandscape = true;
      this.game.scale.pageAlignHorizontally = true;
      this.game.scale.setScreenSize(true);
    }

    this.game.state.start('Preloader');
  }
};

},{}],"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\game.js":[function(require,module,exports){
/*
Main testing environment.
*/

var Cube = require('../entities/cube');

var Utils = require('../utils');

var mouseBody; // physics body for mouse

var Game = function () {
  this.testentity = null;
};

module.exports = Game;

Game.prototype = {

  create: function () {
    this.game.physics.startSystem(Phaser.Physics.P2JS);
    this.game.physics.p2.setImpactEvents(true);
    mouseBody = new p2.Body(); // jshint ignore:line
    this.game.physics.p2.world.addBody(mouseBody);
    this.placeKey = this.game.input.keyboard.addKey(Phaser.Keyboard.P);
    this.placeKey.onDown.add(this.placeCube, this);
    
    this.mouseX = 0;
    this.mouseY = 0;
    
    this.input.onDown.add(this.click, this);
    this.input.onUp.add(this.release, this);
    this.input.addMoveCallback(this.move, this);
    this.grabbed = undefined;
    this.line = new Phaser.Line(0, 0, 0, 0);
    
    this.rootSpawned = false;
    
    this.debugNum = 0;
    this.myRoot = undefined;
    
     // var polygonTest = this.game.add.sprite(60, 60, 'testsprite');
     // this.game.physics.p2.enableBody(polygonTest, true);
     // polygonTest.body.clearShapes();
     // polygonTest.body.loadPolygon('module_physics', 'test2');
  },

  update: function () {
    if (this.grabbed) {
      var angle = Math.atan2(this.grabbed.sprite.y - this.input.position.y, this.grabbed.sprite.x - this.input.position.x) + Math.PI;
      var dist = Utils.distance(this.grabbed.sprite.x, this.grabbed.sprite.y, this.input.position.x, this.input.position.y);
      var weight = 10;
      this.grabbed.force.x = Math.cos(angle) * dist * weight;
      this.grabbed.force.y = Math.sin(angle) * dist * weight;
      this.line.setTo(this.grabbed.sprite.x, this.grabbed.sprite.y, this.input.position.x, this.input.position.y);
    } else {
       this.line.setTo(0, 0, 0, 0);
    }
  },
  
  render: function () {
    this.game.debug.geom(this.line);
  },

  click: function (pointer) {
    var bodies = this.game.physics.p2.hitTest(pointer.position);
    if (bodies.length)
    {
        this.grabbed = bodies[0].parent;
        // console.log(this.grabbed.sprite.toString());
    }
  },
  
  release: function () {
     if (this.grabbed) {
        this.grabbed = undefined;
     }
  },
  
  move: function (pointer) {
    // p2 uses different coordinate system, so convert the pointer position to p2's coordinate system
    mouseBody.position[0] = this.game.physics.p2.pxmi(pointer.position.x);
    mouseBody.position[1] = this.game.physics.p2.pxmi(pointer.position.y);
    this.mouseX = pointer.position.x;
    this.mouseY = pointer.position.y;
  },
  
  placeCube: function () {
    var entity = new Cube(this.game, this.mouseX, this.mouseY);
    var scale = 0.5;
    entity.name = this.debugNum++;
    entity.scale.x = scale;
    entity.scale.y = scale;
    entity.anchor.setTo(0.5, 0.5);
    this.game.physics.p2.enable(entity);
    entity.body.onBeginContact.add(entity.cubeCollide, entity);
    entity.body.damping = 0.9;
    entity.body.angularDamping = 0.9;
    if (!this.rootSpawned) {
       entity.root = true;
       this.rootSpawned = true;
    }
  }
};




























},{"../entities/cube":"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\entities\\cube.js","../utils":"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\utils.js"}],"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\menu.js":[function(require,module,exports){
var Menu = function () {
  this.text = null;
};

module.exports = Menu;

Menu.prototype = {

  create: function () {
    var x = this.game.width / 2;
    var y = this.game.height / 2;

    var style = { font: '65px Arial', fill: '#ffffff', align: 'center' };

    this.text = this.add.text(x - 300, y - 200, 'Press to Start', style);

    this.input.onDown.add(this.onDown, this);
  },

  update: function () {
  },

  onDown: function () {
    this.game.state.start(playerState.currentLevel); // jshint ignore:line
  }
};

},{}],"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\preloader.js":[function(require,module,exports){
var Preloader = function (game) {
  game = null;
  this.asset = null;
  this.ready = false;
};

module.exports = Preloader;

Preloader.prototype = {

  preload: function () {
    this.asset = this.add.sprite(320, 240, 'preloader');
    this.asset.anchor.setTo(0.5, 0.5);

    this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
    this.load.setPreloadSprite(this.asset);
    this.load.image('testsprite', 'assets/test2.png');
    this.load.physics('module_physics', 'assets/module_physics.json');
  },

  create: function () {
    this.asset.cropEnabled = false;
  },

  update: function () {
    if (!!this.ready) {
      // this.game.state.start('Menu');
      this.game.state.start(playerState.currentLevel); // jshint ignore:line
    }
  },

  onLoadComplete: function () {
    this.ready = true;
  }
};

},{}],"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\states\\splash.js":[function(require,module,exports){
var Splash = function () {
};

module.exports = Splash;

Splash.prototype = {
  create: function () {
  }
};
},{}],"c:\\Users\\Matthew Kuhn\\Documents\\GitHub\\AboveTheIronCurtain\\src\\js\\utils.js":[function(require,module,exports){
/*
Collection of utility functions.
*/

var Utils = {
    containsObject: function(obj, list) {
        var i;
        for (i = 0; i < list.length; i++) {
            if (list[i] === obj) {
                return true;
            }
        }

        return false;
    },
    distance: function(x1, y1, x2, y2) {
       return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));
    }
};

module.exports = Utils;
},{}]},{},["./src/js/main.js"])
<<<<<<< HEAD
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvZW50aXRpZXMvY3ViZS5qcyIsInNyYy9qcy9zdGF0ZXMvYm9vdC5qcyIsInNyYy9qcy9zdGF0ZXMvZ2FtZS5qcyIsInNyYy9qcy9zdGF0ZXMvbWVudS5qcyIsInNyYy9qcy9zdGF0ZXMvcHJlbG9hZGVyLmpzIiwic3JjL2pzL3N0YXRlcy9zcGxhc2guanMiLCJzcmMvanMvdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSg4MDAsIDgwMCwgUGhhc2VyLkFVVE8sICdhdGljLWdhbWUnKTtcclxuXHJcbndpbmRvdy5wbGF5ZXJTdGF0ZSA9IHtcclxuICAgIGN1cnJlbnRMZXZlbDogJ0dhbWUnXHJcbn07XHJcblxyXG5nYW1lLnN0YXRlLmFkZCgnQm9vdCcsIHJlcXVpcmUoJy4vc3RhdGVzL2Jvb3QnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdTcGxhc2gnLCByZXF1aXJlKCcuL3N0YXRlcy9zcGxhc2gnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdQcmVsb2FkZXInLCByZXF1aXJlKCcuL3N0YXRlcy9wcmVsb2FkZXInKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdNZW51JywgcmVxdWlyZSgnLi9zdGF0ZXMvbWVudScpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ0dhbWUnLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lJykpO1xyXG5cclxuZ2FtZS5zdGF0ZS5zdGFydCgnQm9vdCcpOyIsIi8qXHJcbkRlZmluZXMgYSBjdWJlIG1vZHVsZSBmb3IgYSBjdWJlc2F0LlxyXG4qL1xyXG5cclxudmFyIEN1YmUgPSBmdW5jdGlvbiAoZ2FtZSwgeCwgeSkge1xyXG4gICAgUGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksICd0ZXN0c3ByaXRlJyk7XHJcbiAgICBnYW1lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuICAgIHRoaXMubm9ydGggPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmVhc3QgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnNvdXRoID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy53ZXN0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5yb290ID0gZmFsc2U7XHJcbiAgICB0aGlzLkRJUiA9IHtOT1JUSDogMCwgRUFTVDogMSwgU09VVEg6IDIsIFdFU1Q6IDN9O1xyXG59O1xyXG5cclxuQ3ViZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuQ3ViZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDdWJlO1xyXG5cclxuLyoqXHJcbiAqIEF1dG9tYXRpY2FsbHkgY2FsbGVkIGJ5IFdvcmxkLnVwZGF0ZVxyXG4gKi9cclxuQ3ViZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcbn07XHJcblxyXG5DdWJlLnByb3RvdHlwZS5hZGRDb25uZWN0aW9uID0gZnVuY3Rpb24ob3RoZXIpIHtcclxuICB2YXIgb2Zmc2V0ID0gMjtcclxuICB2YXIgdGhpc1NpZGUgPSB0aGlzLnJlbGF0aXZlU2lkZSh0aGlzLmJvZHksIG90aGVyKTtcclxuICB2YXIgb3RoZXJTaWRlID0gdGhpcy5yZWxhdGl2ZVNpZGUob3RoZXIsIHRoaXMuYm9keSk7XHJcbiAgaWYgKHRoaXMuZ2V0U2lkZSh0aGlzU2lkZSkpIHtcclxuICAgICByZXR1cm47XHJcbiAgfVxyXG4gIGlmIChvdGhlci5zcHJpdGUuZ2V0U2lkZShvdGhlclNpZGUpKSB7XHJcbiAgICAgcmV0dXJuO1xyXG4gIH1cclxuICBzd2l0Y2ggKHRoaXNTaWRlKSB7XHJcbiAgICAgY2FzZSB0aGlzLkRJUi5OT1JUSDpcclxuICAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5jcmVhdGVMb2NrQ29uc3RyYWludCh0aGlzLmJvZHksIG90aGVyLCBbMCwgdGhpcy53aWR0aCArIG9mZnNldF0pO1xyXG4gICAgIHRoaXMubm9ydGggPSBvdGhlci5zcHJpdGU7XHJcbiAgICAgYnJlYWs7XHJcbiAgICAgY2FzZSB0aGlzLkRJUi5FQVNUOlxyXG4gICAgIHRoaXMuZ2FtZS5waHlzaWNzLnAyLmNyZWF0ZUxvY2tDb25zdHJhaW50KHRoaXMuYm9keSwgb3RoZXIsIFstdGhpcy53aWR0aCAtIG9mZnNldCwgMF0pO1xyXG4gICAgIHRoaXMuZWFzdCA9IG90aGVyLnNwcml0ZTtcclxuICAgICBicmVhaztcclxuICAgICBjYXNlIHRoaXMuRElSLlNPVVRIOlxyXG4gICAgIHRoaXMuZ2FtZS5waHlzaWNzLnAyLmNyZWF0ZUxvY2tDb25zdHJhaW50KHRoaXMuYm9keSwgb3RoZXIsIFswLCAtdGhpcy53aWR0aCAtIG9mZnNldF0pO1xyXG4gICAgIHRoaXMuc291dGggPSBvdGhlci5zcHJpdGU7XHJcbiAgICAgYnJlYWs7XHJcbiAgICAgY2FzZSB0aGlzLkRJUi5XRVNUOlxyXG4gICAgIHRoaXMuZ2FtZS5waHlzaWNzLnAyLmNyZWF0ZUxvY2tDb25zdHJhaW50KHRoaXMuYm9keSwgb3RoZXIsIFt0aGlzLndpZHRoICsgb2Zmc2V0LCAwXSk7XHJcbiAgICAgdGhpcy53ZXN0ID0gb3RoZXIuc3ByaXRlO1xyXG4gICAgIGJyZWFrO1xyXG4gIH1cclxuICBzd2l0Y2ggKG90aGVyU2lkZSkge1xyXG4gICAgIGNhc2UgdGhpcy5ESVIuTk9SVEg6XHJcbiAgICAgb3RoZXIuc3ByaXRlLm5vcnRoID0gdGhpcztcclxuICAgICBicmVhaztcclxuICAgICBjYXNlIHRoaXMuRElSLkVBU1Q6XHJcbiAgICAgb3RoZXIuc3ByaXRlLmVhc3QgPSB0aGlzO1xyXG4gICAgIGJyZWFrO1xyXG4gICAgIGNhc2UgdGhpcy5ESVIuU09VVEg6XHJcbiAgICAgb3RoZXIuc3ByaXRlLnNvdXRoID0gdGhpcztcclxuICAgICBicmVhaztcclxuICAgICBjYXNlIHRoaXMuRElSLldFU1Q6XHJcbiAgICAgb3RoZXIuc3ByaXRlLndlc3QgPSB0aGlzO1xyXG4gICAgIGJyZWFrO1xyXG4gIH1cclxufTtcclxuXHJcbkN1YmUucHJvdG90eXBlLnJlbGF0aXZlU2lkZSA9IGZ1bmN0aW9uKHRoaXNCb2R5LCBvdGhlckJvZHkpIHtcclxuICB2YXIgdGhpc1BvaW50ID0gbmV3IFBoYXNlci5Qb2ludCh0aGlzQm9keS54LCB0aGlzQm9keS55KTtcclxuICB2YXIgb3RoZXJQb2ludCA9IG5ldyBQaGFzZXIuUG9pbnQob3RoZXJCb2R5LngsIG90aGVyQm9keS55KTtcclxuICB2YXIgYW5nbGVUb090aGVyID0gUGhhc2VyLlBvaW50LmFuZ2xlKHRoaXNQb2ludCwgb3RoZXJQb2ludCk7XHJcbiAgaWYgKGFuZ2xlVG9PdGhlciA8IDApIHsgLy8gZml4IGR1bWIgcGFydCBvZiBQaGFzZXIuUG9pbnQuYW5nbGUoKVxyXG4gICAgIGFuZ2xlVG9PdGhlciA9IDIgKiBNYXRoLlBJICsgYW5nbGVUb090aGVyO1xyXG4gIH1cclxuICBhbmdsZVRvT3RoZXIgPSAoYW5nbGVUb090aGVyICsgMy8yICogTWF0aC5QSSkgJSAoMiAqIE1hdGguUEkpOyAvLyByb3RhdGUgOTAgZCBjbG9ja3dpc2VcclxuICB2YXIgZGlmZkFuZ2xlID0gYW5nbGVUb090aGVyIC0gdGhpc0JvZHkucm90YXRpb247XHJcbiAgIGlmIChkaWZmQW5nbGUgPCAxIC8gNCAqIE1hdGguUEkgfHwgZGlmZkFuZ2xlID4gNyAvIDQgKiBNYXRoLlBJKSB7IC8vIG5vcnRoXHJcbiAgICAgcmV0dXJuIHRoaXMuRElSLk5PUlRIO1xyXG4gIH0gZWxzZSBpZiAoZGlmZkFuZ2xlID49IDEgLyA0ICogTWF0aC5QSSAmJiBkaWZmQW5nbGUgPCAzIC8gNCAqIE1hdGguUEkpIHsgLy8gZWFzdFxyXG4gICAgIHJldHVybiB0aGlzLkRJUi5FQVNUO1xyXG4gIH0gZWxzZSBpZiAoZGlmZkFuZ2xlID49IDMgLyA0ICogTWF0aC5QSSAmJiBkaWZmQW5nbGUgPCA1IC8gNCAqIE1hdGguUEkpIHsgLy8gc291dGhcclxuICAgICByZXR1cm4gdGhpcy5ESVIuU09VVEg7XHJcbiAgfSBlbHNlIGlmIChkaWZmQW5nbGUgPj0gNSAvIDQgKiBNYXRoLlBJICYmIGRpZmZBbmdsZSA8IDcgLyA0ICogTWF0aC5QSSkgeyAvLyB3ZXN0XHJcbiAgICAgcmV0dXJuIHRoaXMuRElSLldFU1Q7XHJcbiAgfVxyXG59O1xyXG5cclxuQ3ViZS5wcm90b3R5cGUuY3ViZUNvbGxpZGUgPSBmdW5jdGlvbihvdGhlcikge1xyXG4gICBpZiAob3RoZXIgPT09IG51bGwgfHwgdGhpcy5wcm90b3R5cGUgIT09IG90aGVyLnByb3RvdHlwZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgIH1cclxuICAgaWYgKHRoaXMubXlSb290KSB7XHJcbiAgICAgIGlmIChvdGhlci5zcHJpdGUubXlSb290ICYmIHRoaXMubXlSb290ID09PSBvdGhlci5zcHJpdGUubXlSb290KSB7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5yb290KSB7XHJcbiAgICAgICAgIHRoaXMubXlSb290ID0gdGhpcy5uYW1lO1xyXG4gICAgICB9XHJcbiAgIH1cclxuICAgaWYgKHRoaXMuaGFzUm9vdCgpICYmICFvdGhlci5zcHJpdGUuaGFzUm9vdCgpKSB7XHJcbiAgICAgIHRoaXMuYWRkQ29ubmVjdGlvbihvdGhlcik7XHJcbiAgIH1cclxufTtcclxuXHJcbkN1YmUucHJvdG90eXBlLmhhc1Jvb3QgPSBmdW5jdGlvbigpIHtcclxuICBpZiAodGhpcy5yb290KSB7XHJcbiAgICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIHZhciB2aXNpdGVkID0gW107XHJcbiAgdmlzaXRlZC5wdXNoKHRoaXMpO1xyXG4gIGlmICh0aGlzLm5vcnRoICYmIHRoaXMuaGFzUm9vdFIodmlzaXRlZCwgdGhpcy5ub3J0aCkpIHtcclxuICAgIHJldHVybiB0cnVlOyAgXHJcbiAgfVxyXG4gIGlmICh0aGlzLmVhc3QgJiYgdGhpcy5oYXNSb290Uih2aXNpdGVkLCB0aGlzLmVhc3QpKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTsgIFxyXG4gIH1cclxuICBpZiAodGhpcy5zb3V0aCAmJiB0aGlzLmhhc1Jvb3RSKHZpc2l0ZWQsIHRoaXMuc291dGgpKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTsgIFxyXG4gIH1cclxuICBpZiAodGhpcy53ZXN0ICYmIHRoaXMuaGFzUm9vdFIodmlzaXRlZCwgdGhpcy53ZXN0KSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG59O1xyXG5cclxuQ3ViZS5wcm90b3R5cGUuaGFzUm9vdFIgPSBmdW5jdGlvbih2aXNpdGVkLCBjdXIpIHtcclxuICAgaWYgKGN1ci5yb290KSB7XHJcbiAgICAgIGlmICghdGhpcy5teVJvb3QpIHtcclxuICAgICAgICAgdGhpcy5teVJvb3QgPSBjdXIubmFtZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgfVxyXG4gICB2aXNpdGVkLnB1c2goY3VyKTtcclxuICAgaWYgKGN1ci5ub3J0aCAmJiAhdGhpcy5jb250YWlucyh2aXNpdGVkLCBjdXIubm9ydGgpICYmIHRoaXMuaGFzUm9vdFIodmlzaXRlZCwgY3VyLm5vcnRoKSkge1xyXG4gICAgcmV0dXJuIHRydWU7ICBcclxuICB9XHJcbiAgaWYgKGN1ci5lYXN0ICYmICF0aGlzLmNvbnRhaW5zKHZpc2l0ZWQsIGN1ci5lYXN0KSAmJiB0aGlzLmhhc1Jvb3RSKHZpc2l0ZWQsIGN1ci5lYXN0KSkge1xyXG4gICAgcmV0dXJuIHRydWU7ICBcclxuICB9XHJcbiAgaWYgKGN1ci5zb3V0aCAmJiAhdGhpcy5jb250YWlucyh2aXNpdGVkLCBjdXIuc291dGgpICYmIHRoaXMuaGFzUm9vdFIodmlzaXRlZCwgY3VyLnNvdXRoKSkge1xyXG4gICAgcmV0dXJuIHRydWU7ICBcclxuICB9XHJcbiAgaWYgKGN1ci53ZXN0ICYmICF0aGlzLmNvbnRhaW5zKHZpc2l0ZWQsIGN1ci53ZXN0KSAmJiB0aGlzLmhhc1Jvb3RSKHZpc2l0ZWQsIGN1ci53ZXN0KSkge1xyXG4gICAgcmV0dXJuIHRydWU7ICBcclxuICB9XHJcbn07XHJcblxyXG5DdWJlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChhcnJheSwgb2JqKSB7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoYXJyYXlbaV0gPT09IG9iaikge1xyXG4gICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gIH0gIFxyXG4gICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5DdWJlLnByb3RvdHlwZS5nZXRTaWRlID0gZnVuY3Rpb24oc2lkZSkge1xyXG4gICBzd2l0Y2ggKHNpZGUpIHtcclxuICAgICBjYXNlIHRoaXMuRElSLk5PUlRIOlxyXG4gICAgIHJldHVybiB0aGlzLm5vcnRoO1xyXG4gICAgIGNhc2UgdGhpcy5ESVIuRUFTVDpcclxuICAgICByZXR1cm4gdGhpcy5lYXN0O1xyXG4gICAgIGNhc2UgdGhpcy5ESVIuU09VVEg6XHJcbiAgICAgcmV0dXJuIHRoaXMuc291dGg7XHJcbiAgICAgY2FzZSB0aGlzLkRJUi5XRVNUOlxyXG4gICAgIHJldHVybiB0aGlzLndlc3Q7XHJcbiAgfVxyXG4gIHJldHVybiB1bmRlZmluZWQ7XHJcbn07XHJcblxyXG5DdWJlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICB2YXIgc3RyaW5nID0gJyc7XHJcbiAgIHN0cmluZyArPSB0aGlzLmNvbmNhdCgnbmFtZScsIHRoaXMubmFtZSk7XHJcbiAgIHN0cmluZyArPSB0aGlzLmNvbmNhdCgnaXNSb290JywgdGhpcy5yb290KTtcclxuICAgc3RyaW5nICs9IHRoaXMuY29uY2F0KCdteVJvb3QnLCB0aGlzLm15Um9vdCk7XHJcbiAgIHN0cmluZyArPSB0aGlzLmNvbmNhdCgnbm9ydGgnLCB0aGlzLm5vcnRoICE9PSB1bmRlZmluZWQpO1xyXG4gICBzdHJpbmcgKz0gdGhpcy5jb25jYXQoJ2Vhc3QnLCB0aGlzLmVhc3QgIT09IHVuZGVmaW5lZCk7XHJcbiAgIHN0cmluZyArPSB0aGlzLmNvbmNhdCgnc291dGgnLCB0aGlzLnNvdXRoICE9PSB1bmRlZmluZWQpO1xyXG4gICBzdHJpbmcgKz0gdGhpcy5jb25jYXQoJ3dlc3QnLCB0aGlzLndlc3QgIT09IHVuZGVmaW5lZCk7XHJcbiAgIHJldHVybiBzdHJpbmc7XHJcbn07XHJcblxyXG5DdWJlLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbihzdHJpbmcsIHZhbCkge1xyXG4gICByZXR1cm4gc3RyaW5nICsgJzogJyArIHZhbCArICdcXG4nO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDdWJlO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBCb290ID0gZnVuY3Rpb24gKCkge307XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJvb3Q7XHJcblxyXG5Cb290LnByb3RvdHlwZSA9IHtcclxuXHJcbiAgcHJlbG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdwcmVsb2FkZXInLCAnYXNzZXRzL3ByZWxvYWRlci5naWYnKTtcclxuICB9LFxyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2FtZS5pbnB1dC5tYXhQb2ludGVycyA9IDE7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZS5kZXZpY2UuZGVza3RvcCkge1xyXG4gICAgICB0aGlzLmdhbWUuc3RhZ2Uuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5zY2FsZU1vZGUgPSBQaGFzZXIuU2NhbGVNYW5hZ2VyLlNIT1dfQUxMO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWluV2lkdGggPSAgNDgwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWluSGVpZ2h0ID0gMjYwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWF4V2lkdGggPSA2NDA7XHJcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5tYXhIZWlnaHQgPSA0ODA7XHJcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5mb3JjZUxhbmRzY2FwZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5wYWdlQWxpZ25Ib3Jpem9udGFsbHkgPSB0cnVlO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2V0U2NyZWVuU2l6ZSh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ1ByZWxvYWRlcicpO1xyXG4gIH1cclxufTtcclxuIiwiLypcclxuTWFpbiB0ZXN0aW5nIGVudmlyb25tZW50LlxyXG4qL1xyXG5cclxudmFyIEN1YmUgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9jdWJlJyk7XHJcblxyXG52YXIgVXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxudmFyIG1vdXNlQm9keTsgLy8gcGh5c2ljcyBib2R5IGZvciBtb3VzZVxyXG5cclxudmFyIEdhbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy50ZXN0ZW50aXR5ID0gbnVsbDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZTtcclxuXHJcbkdhbWUucHJvdG90eXBlID0ge1xyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2FtZS5waHlzaWNzLnN0YXJ0U3lzdGVtKFBoYXNlci5QaHlzaWNzLlAySlMpO1xyXG4gICAgdGhpcy5nYW1lLnBoeXNpY3MucDIuc2V0SW1wYWN0RXZlbnRzKHRydWUpO1xyXG4gICAgbW91c2VCb2R5ID0gbmV3IHAyLkJvZHkoKTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi53b3JsZC5hZGRCb2R5KG1vdXNlQm9keSk7XHJcbiAgICB0aGlzLnBsYWNlS2V5ID0gdGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuS2V5Ym9hcmQuUCk7XHJcbiAgICB0aGlzLnBsYWNlS2V5Lm9uRG93bi5hZGQodGhpcy5wbGFjZUN1YmUsIHRoaXMpO1xyXG4gICAgXHJcbiAgICB0aGlzLm1vdXNlWCA9IDA7XHJcbiAgICB0aGlzLm1vdXNlWSA9IDA7XHJcbiAgICBcclxuICAgIHRoaXMuaW5wdXQub25Eb3duLmFkZCh0aGlzLmNsaWNrLCB0aGlzKTtcclxuICAgIHRoaXMuaW5wdXQub25VcC5hZGQodGhpcy5yZWxlYXNlLCB0aGlzKTtcclxuICAgIHRoaXMuaW5wdXQuYWRkTW92ZUNhbGxiYWNrKHRoaXMubW92ZSwgdGhpcyk7XHJcbiAgICB0aGlzLmdyYWJiZWQgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmxpbmUgPSBuZXcgUGhhc2VyLkxpbmUoMCwgMCwgMCwgMCk7XHJcbiAgICBcclxuICAgIHRoaXMucm9vdFNwYXduZWQgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgdGhpcy5kZWJ1Z051bSA9IDA7XHJcbiAgICB0aGlzLm15Um9vdCA9IHVuZGVmaW5lZDtcclxuICAgIFxyXG4gICAgIC8vIHZhciBwb2x5Z29uVGVzdCA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKDYwLCA2MCwgJ3Rlc3RzcHJpdGUnKTtcclxuICAgICAvLyB0aGlzLmdhbWUucGh5c2ljcy5wMi5lbmFibGVCb2R5KHBvbHlnb25UZXN0LCB0cnVlKTtcclxuICAgICAvLyBwb2x5Z29uVGVzdC5ib2R5LmNsZWFyU2hhcGVzKCk7XHJcbiAgICAgLy8gcG9seWdvblRlc3QuYm9keS5sb2FkUG9seWdvbignbW9kdWxlX3BoeXNpY3MnLCAndGVzdDInKTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLmdyYWJiZWQpIHtcclxuICAgICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih0aGlzLmdyYWJiZWQuc3ByaXRlLnkgLSB0aGlzLmlucHV0LnBvc2l0aW9uLnksIHRoaXMuZ3JhYmJlZC5zcHJpdGUueCAtIHRoaXMuaW5wdXQucG9zaXRpb24ueCkgKyBNYXRoLlBJO1xyXG4gICAgICB2YXIgZGlzdCA9IFV0aWxzLmRpc3RhbmNlKHRoaXMuZ3JhYmJlZC5zcHJpdGUueCwgdGhpcy5ncmFiYmVkLnNwcml0ZS55LCB0aGlzLmlucHV0LnBvc2l0aW9uLngsIHRoaXMuaW5wdXQucG9zaXRpb24ueSk7XHJcbiAgICAgIHZhciB3ZWlnaHQgPSAxMDtcclxuICAgICAgdGhpcy5ncmFiYmVkLmZvcmNlLnggPSBNYXRoLmNvcyhhbmdsZSkgKiBkaXN0ICogd2VpZ2h0O1xyXG4gICAgICB0aGlzLmdyYWJiZWQuZm9yY2UueSA9IE1hdGguc2luKGFuZ2xlKSAqIGRpc3QgKiB3ZWlnaHQ7XHJcbiAgICAgIHRoaXMubGluZS5zZXRUbyh0aGlzLmdyYWJiZWQuc3ByaXRlLngsIHRoaXMuZ3JhYmJlZC5zcHJpdGUueSwgdGhpcy5pbnB1dC5wb3NpdGlvbi54LCB0aGlzLmlucHV0LnBvc2l0aW9uLnkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgIHRoaXMubGluZS5zZXRUbygwLCAwLCAwLCAwKTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5nYW1lLmRlYnVnLmdlb20odGhpcy5saW5lKTtcclxuICB9LFxyXG5cclxuICBjbGljazogZnVuY3Rpb24gKHBvaW50ZXIpIHtcclxuICAgIHZhciBib2RpZXMgPSB0aGlzLmdhbWUucGh5c2ljcy5wMi5oaXRUZXN0KHBvaW50ZXIucG9zaXRpb24pO1xyXG4gICAgaWYgKGJvZGllcy5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5ncmFiYmVkID0gYm9kaWVzWzBdLnBhcmVudDtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmdyYWJiZWQuc3ByaXRlLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgXHJcbiAgcmVsZWFzZTogZnVuY3Rpb24gKCkge1xyXG4gICAgIGlmICh0aGlzLmdyYWJiZWQpIHtcclxuICAgICAgICB0aGlzLmdyYWJiZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgfVxyXG4gIH0sXHJcbiAgXHJcbiAgbW92ZTogZnVuY3Rpb24gKHBvaW50ZXIpIHtcclxuICAgIC8vIHAyIHVzZXMgZGlmZmVyZW50IGNvb3JkaW5hdGUgc3lzdGVtLCBzbyBjb252ZXJ0IHRoZSBwb2ludGVyIHBvc2l0aW9uIHRvIHAyJ3MgY29vcmRpbmF0ZSBzeXN0ZW1cclxuICAgIG1vdXNlQm9keS5wb3NpdGlvblswXSA9IHRoaXMuZ2FtZS5waHlzaWNzLnAyLnB4bWkocG9pbnRlci5wb3NpdGlvbi54KTtcclxuICAgIG1vdXNlQm9keS5wb3NpdGlvblsxXSA9IHRoaXMuZ2FtZS5waHlzaWNzLnAyLnB4bWkocG9pbnRlci5wb3NpdGlvbi55KTtcclxuICAgIHRoaXMubW91c2VYID0gcG9pbnRlci5wb3NpdGlvbi54O1xyXG4gICAgdGhpcy5tb3VzZVkgPSBwb2ludGVyLnBvc2l0aW9uLnk7XHJcbiAgfSxcclxuICBcclxuICBwbGFjZUN1YmU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBlbnRpdHkgPSBuZXcgQ3ViZSh0aGlzLmdhbWUsIHRoaXMubW91c2VYLCB0aGlzLm1vdXNlWSk7XHJcbiAgICB2YXIgc2NhbGUgPSAwLjU7XHJcbiAgICBlbnRpdHkubmFtZSA9IHRoaXMuZGVidWdOdW0rKztcclxuICAgIGVudGl0eS5zY2FsZS54ID0gc2NhbGU7XHJcbiAgICBlbnRpdHkuc2NhbGUueSA9IHNjYWxlO1xyXG4gICAgZW50aXR5LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5lbmFibGUoZW50aXR5KTtcclxuICAgIGVudGl0eS5ib2R5Lm9uQmVnaW5Db250YWN0LmFkZChlbnRpdHkuY3ViZUNvbGxpZGUsIGVudGl0eSk7XHJcbiAgICBlbnRpdHkuYm9keS5kYW1waW5nID0gMC45O1xyXG4gICAgZW50aXR5LmJvZHkuYW5ndWxhckRhbXBpbmcgPSAwLjk7XHJcbiAgICBpZiAoIXRoaXMucm9vdFNwYXduZWQpIHtcclxuICAgICAgIGVudGl0eS5yb290ID0gdHJ1ZTtcclxuICAgICAgIHRoaXMucm9vdFNwYXduZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIE1lbnUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy50ZXh0ID0gbnVsbDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVudTtcclxuXHJcbk1lbnUucHJvdG90eXBlID0ge1xyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB4ID0gdGhpcy5nYW1lLndpZHRoIC8gMjtcclxuICAgIHZhciB5ID0gdGhpcy5nYW1lLmhlaWdodCAvIDI7XHJcblxyXG4gICAgdmFyIHN0eWxlID0geyBmb250OiAnNjVweCBBcmlhbCcsIGZpbGw6ICcjZmZmZmZmJywgYWxpZ246ICdjZW50ZXInIH07XHJcblxyXG4gICAgdGhpcy50ZXh0ID0gdGhpcy5hZGQudGV4dCh4IC0gMzAwLCB5IC0gMjAwLCAnUHJlc3MgdG8gU3RhcnQnLCBzdHlsZSk7XHJcblxyXG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25Eb3duLCB0aGlzKTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuICB9LFxyXG5cclxuICBvbkRvd246IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydChwbGF5ZXJTdGF0ZS5jdXJyZW50TGV2ZWwpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuICB9XHJcbn07XHJcbiIsInZhciBQcmVsb2FkZXIgPSBmdW5jdGlvbiAoZ2FtZSkge1xyXG4gIGdhbWUgPSBudWxsO1xyXG4gIHRoaXMuYXNzZXQgPSBudWxsO1xyXG4gIHRoaXMucmVhZHkgPSBmYWxzZTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUHJlbG9hZGVyO1xyXG5cclxuUHJlbG9hZGVyLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgcHJlbG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5hc3NldCA9IHRoaXMuYWRkLnNwcml0ZSgzMjAsIDI0MCwgJ3ByZWxvYWRlcicpO1xyXG4gICAgdGhpcy5hc3NldC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG5cclxuICAgIHRoaXMubG9hZC5vbkxvYWRDb21wbGV0ZS5hZGRPbmNlKHRoaXMub25Mb2FkQ29tcGxldGUsIHRoaXMpO1xyXG4gICAgdGhpcy5sb2FkLnNldFByZWxvYWRTcHJpdGUodGhpcy5hc3NldCk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3Rlc3RzcHJpdGUnLCAnYXNzZXRzL3Rlc3QyLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLnBoeXNpY3MoJ21vZHVsZV9waHlzaWNzJywgJ2Fzc2V0cy9tb2R1bGVfcGh5c2ljcy5qc29uJyk7XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmFzc2V0LmNyb3BFbmFibGVkID0gZmFsc2U7XHJcbiAgfSxcclxuXHJcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoISF0aGlzLnJlYWR5KSB7XHJcbiAgICAgIC8vIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnTWVudScpO1xyXG4gICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQocGxheWVyU3RhdGUuY3VycmVudExldmVsKTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgb25Mb2FkQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMucmVhZHkgPSB0cnVlO1xyXG4gIH1cclxufTtcclxuIiwidmFyIFNwbGFzaCA9IGZ1bmN0aW9uICgpIHtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU3BsYXNoO1xyXG5cclxuU3BsYXNoLnByb3RvdHlwZSA9IHtcclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICB9XHJcbn07IiwiLypcclxuQ29sbGVjdGlvbiBvZiB1dGlsaXR5IGZ1bmN0aW9ucy5cclxuKi9cclxuXHJcbnZhciBVdGlscyA9IHtcclxuICAgIGNvbnRhaW5zT2JqZWN0OiBmdW5jdGlvbihvYmosIGxpc3QpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobGlzdFtpXSA9PT0gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuICAgIGRpc3RhbmNlOiBmdW5jdGlvbih4MSwgeTEsIHgyLCB5Mikge1xyXG4gICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh4MSAtIHgyLCAyKSArIE1hdGgucG93KHkxIC0geTIsIDIpKTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXRpbHM7Il19
=======
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvZW50aXRpZXMvY3ViZS5qcyIsInNyYy9qcy9zdGF0ZXMvYm9vdC5qcyIsInNyYy9qcy9zdGF0ZXMvZ2FtZS5qcyIsInNyYy9qcy9zdGF0ZXMvbWVudS5qcyIsInNyYy9qcy9zdGF0ZXMvcHJlbG9hZGVyLmpzIiwic3JjL2pzL3N0YXRlcy9zcGxhc2guanMiLCJzcmMvanMvdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSg4MDAsIDgwMCwgUGhhc2VyLkFVVE8sICdhdGljLWdhbWUnKTtcclxuXHJcbndpbmRvdy5wbGF5ZXJTdGF0ZSA9IHtcclxuICAgIGN1cnJlbnRMZXZlbDogJ0dhbWUnXHJcbn07XHJcblxyXG5nYW1lLnN0YXRlLmFkZCgnQm9vdCcsIHJlcXVpcmUoJy4vc3RhdGVzL2Jvb3QnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdTcGxhc2gnLCByZXF1aXJlKCcuL3N0YXRlcy9zcGxhc2gnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdQcmVsb2FkZXInLCByZXF1aXJlKCcuL3N0YXRlcy9wcmVsb2FkZXInKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdNZW51JywgcmVxdWlyZSgnLi9zdGF0ZXMvbWVudScpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ0dhbWUnLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lJykpO1xyXG5cclxuZ2FtZS5zdGF0ZS5zdGFydCgnQm9vdCcpOyIsIi8qXHJcbkRlZmluZXMgYSBjdWJlIG1vZHVsZS5cclxuKi9cclxuXHJcbnZhciBDdWJlID0gZnVuY3Rpb24gKGdhbWUsIHgsIHkpIHtcclxuICAgIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAndGVzdHNwcml0ZScpO1xyXG4gICAgZ2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICB0aGlzLm5vcnRoID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5lYXN0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5zb3V0aCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMud2VzdCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMucm9vdCA9IGZhbHNlO1xyXG4gICAgdGhpcy5ESVIgPSB7Tk9SVEg6IDAsIEVBU1Q6IDEsIFNPVVRIOiAyLCBXRVNUOiAzfTtcclxufTtcclxuXHJcbkN1YmUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcbkN1YmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ3ViZTtcclxuXHJcbi8qKlxyXG4gKiBBdXRvbWF0aWNhbGx5IGNhbGxlZCBieSBXb3JsZC51cGRhdGVcclxuICovXHJcbkN1YmUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG59O1xyXG5cclxuQ3ViZS5wcm90b3R5cGUuYWRkQ29ubmVjdGlvbiA9IGZ1bmN0aW9uKG90aGVyKSB7XHJcbiAgdmFyIG9mZnNldCA9IDI7XHJcbiAgdmFyIHRoaXNTaWRlID0gdGhpcy5yZWxhdGl2ZVNpZGUodGhpcy5ib2R5LCBvdGhlcik7XHJcbiAgdmFyIG90aGVyU2lkZSA9IHRoaXMucmVsYXRpdmVTaWRlKG90aGVyLCB0aGlzLmJvZHkpO1xyXG4gIGlmICh0aGlzLmdldFNpZGUodGhpc1NpZGUpKSB7XHJcbiAgICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAob3RoZXIuc3ByaXRlLmdldFNpZGUob3RoZXJTaWRlKSkge1xyXG4gICAgIHJldHVybjtcclxuICB9XHJcbiAgc3dpdGNoICh0aGlzU2lkZSkge1xyXG4gICAgIGNhc2UgdGhpcy5ESVIuTk9SVEg6XHJcbiAgICAgdGhpcy5nYW1lLnBoeXNpY3MucDIuY3JlYXRlTG9ja0NvbnN0cmFpbnQodGhpcy5ib2R5LCBvdGhlciwgWzAsIHRoaXMud2lkdGggKyBvZmZzZXRdKTtcclxuICAgICB0aGlzLm5vcnRoID0gb3RoZXIuc3ByaXRlO1xyXG4gICAgIGJyZWFrO1xyXG4gICAgIGNhc2UgdGhpcy5ESVIuRUFTVDpcclxuICAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5jcmVhdGVMb2NrQ29uc3RyYWludCh0aGlzLmJvZHksIG90aGVyLCBbLXRoaXMud2lkdGggLSBvZmZzZXQsIDBdKTtcclxuICAgICB0aGlzLmVhc3QgPSBvdGhlci5zcHJpdGU7XHJcbiAgICAgYnJlYWs7XHJcbiAgICAgY2FzZSB0aGlzLkRJUi5TT1VUSDpcclxuICAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5jcmVhdGVMb2NrQ29uc3RyYWludCh0aGlzLmJvZHksIG90aGVyLCBbMCwgLXRoaXMud2lkdGggLSBvZmZzZXRdKTtcclxuICAgICB0aGlzLnNvdXRoID0gb3RoZXIuc3ByaXRlO1xyXG4gICAgIGJyZWFrO1xyXG4gICAgIGNhc2UgdGhpcy5ESVIuV0VTVDpcclxuICAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5jcmVhdGVMb2NrQ29uc3RyYWludCh0aGlzLmJvZHksIG90aGVyLCBbdGhpcy53aWR0aCArIG9mZnNldCwgMF0pO1xyXG4gICAgIHRoaXMud2VzdCA9IG90aGVyLnNwcml0ZTtcclxuICAgICBicmVhaztcclxuICB9XHJcbiAgc3dpdGNoIChvdGhlclNpZGUpIHtcclxuICAgICBjYXNlIHRoaXMuRElSLk5PUlRIOlxyXG4gICAgIG90aGVyLnNwcml0ZS5ub3J0aCA9IHRoaXM7XHJcbiAgICAgYnJlYWs7XHJcbiAgICAgY2FzZSB0aGlzLkRJUi5FQVNUOlxyXG4gICAgIG90aGVyLnNwcml0ZS5lYXN0ID0gdGhpcztcclxuICAgICBicmVhaztcclxuICAgICBjYXNlIHRoaXMuRElSLlNPVVRIOlxyXG4gICAgIG90aGVyLnNwcml0ZS5zb3V0aCA9IHRoaXM7XHJcbiAgICAgYnJlYWs7XHJcbiAgICAgY2FzZSB0aGlzLkRJUi5XRVNUOlxyXG4gICAgIG90aGVyLnNwcml0ZS53ZXN0ID0gdGhpcztcclxuICAgICBicmVhaztcclxuICB9XHJcbn07XHJcblxyXG5DdWJlLnByb3RvdHlwZS5yZWxhdGl2ZVNpZGUgPSBmdW5jdGlvbih0aGlzQm9keSwgb3RoZXJCb2R5KSB7XHJcbiAgdmFyIHRoaXNQb2ludCA9IG5ldyBQaGFzZXIuUG9pbnQodGhpc0JvZHkueCwgdGhpc0JvZHkueSk7XHJcbiAgdmFyIG90aGVyUG9pbnQgPSBuZXcgUGhhc2VyLlBvaW50KG90aGVyQm9keS54LCBvdGhlckJvZHkueSk7XHJcbiAgdmFyIGFuZ2xlVG9PdGhlciA9IFBoYXNlci5Qb2ludC5hbmdsZSh0aGlzUG9pbnQsIG90aGVyUG9pbnQpO1xyXG4gIGlmIChhbmdsZVRvT3RoZXIgPCAwKSB7IC8vIGZpeCBkdW1iIHBhcnQgb2YgUGhhc2VyLlBvaW50LmFuZ2xlKClcclxuICAgICBhbmdsZVRvT3RoZXIgPSAyICogTWF0aC5QSSArIGFuZ2xlVG9PdGhlcjtcclxuICB9XHJcbiAgYW5nbGVUb090aGVyID0gKGFuZ2xlVG9PdGhlciArIDMvMiAqIE1hdGguUEkpICUgKDIgKiBNYXRoLlBJKTsgLy8gcm90YXRlIDkwIGQgY2xvY2t3aXNlXHJcbiAgdmFyIGRpZmZBbmdsZSA9IGFuZ2xlVG9PdGhlciAtIHRoaXNCb2R5LnJvdGF0aW9uO1xyXG4gICBpZiAoZGlmZkFuZ2xlIDwgMSAvIDQgKiBNYXRoLlBJIHx8IGRpZmZBbmdsZSA+IDcgLyA0ICogTWF0aC5QSSkgeyAvLyBub3J0aFxyXG4gICAgIHJldHVybiB0aGlzLkRJUi5OT1JUSDtcclxuICB9IGVsc2UgaWYgKGRpZmZBbmdsZSA+PSAxIC8gNCAqIE1hdGguUEkgJiYgZGlmZkFuZ2xlIDwgMyAvIDQgKiBNYXRoLlBJKSB7IC8vIGVhc3RcclxuICAgICByZXR1cm4gdGhpcy5ESVIuRUFTVDtcclxuICB9IGVsc2UgaWYgKGRpZmZBbmdsZSA+PSAzIC8gNCAqIE1hdGguUEkgJiYgZGlmZkFuZ2xlIDwgNSAvIDQgKiBNYXRoLlBJKSB7IC8vIHNvdXRoXHJcbiAgICAgcmV0dXJuIHRoaXMuRElSLlNPVVRIO1xyXG4gIH0gZWxzZSBpZiAoZGlmZkFuZ2xlID49IDUgLyA0ICogTWF0aC5QSSAmJiBkaWZmQW5nbGUgPCA3IC8gNCAqIE1hdGguUEkpIHsgLy8gd2VzdFxyXG4gICAgIHJldHVybiB0aGlzLkRJUi5XRVNUO1xyXG4gIH1cclxufTtcclxuXHJcbkN1YmUucHJvdG90eXBlLmN1YmVDb2xsaWRlID0gZnVuY3Rpb24ob3RoZXIpIHtcclxuICAgaWYgKG90aGVyID09PSBudWxsIHx8IHRoaXMucHJvdG90eXBlICE9PSBvdGhlci5wcm90b3R5cGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICB9XHJcbiAgIGlmICh0aGlzLm15Um9vdCkge1xyXG4gICAgICBpZiAob3RoZXIuc3ByaXRlLm15Um9vdCAmJiB0aGlzLm15Um9vdCA9PT0gb3RoZXIuc3ByaXRlLm15Um9vdCkge1xyXG4gICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMucm9vdCkge1xyXG4gICAgICAgICB0aGlzLm15Um9vdCA9IHRoaXMubmFtZTtcclxuICAgICAgfVxyXG4gICB9XHJcbiAgIGlmICh0aGlzLmhhc1Jvb3QoKSAmJiAhb3RoZXIuc3ByaXRlLmhhc1Jvb3QoKSkge1xyXG4gICAgICB0aGlzLmFkZENvbm5lY3Rpb24ob3RoZXIpO1xyXG4gICB9XHJcbn07XHJcblxyXG5DdWJlLnByb3RvdHlwZS5oYXNSb290ID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKHRoaXMucm9vdCkge1xyXG4gICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICB2YXIgdmlzaXRlZCA9IFtdO1xyXG4gIHZpc2l0ZWQucHVzaCh0aGlzKTtcclxuICBpZiAodGhpcy5ub3J0aCAmJiB0aGlzLmhhc1Jvb3RSKHZpc2l0ZWQsIHRoaXMubm9ydGgpKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTsgIFxyXG4gIH1cclxuICBpZiAodGhpcy5lYXN0ICYmIHRoaXMuaGFzUm9vdFIodmlzaXRlZCwgdGhpcy5lYXN0KSkge1xyXG4gICAgcmV0dXJuIHRydWU7ICBcclxuICB9XHJcbiAgaWYgKHRoaXMuc291dGggJiYgdGhpcy5oYXNSb290Uih2aXNpdGVkLCB0aGlzLnNvdXRoKSkge1xyXG4gICAgcmV0dXJuIHRydWU7ICBcclxuICB9XHJcbiAgaWYgKHRoaXMud2VzdCAmJiB0aGlzLmhhc1Jvb3RSKHZpc2l0ZWQsIHRoaXMud2VzdCkpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufTtcclxuXHJcbkN1YmUucHJvdG90eXBlLmhhc1Jvb3RSID0gZnVuY3Rpb24odmlzaXRlZCwgY3VyKSB7XHJcbiAgIGlmIChjdXIucm9vdCkge1xyXG4gICAgICBpZiAoIXRoaXMubXlSb290KSB7XHJcbiAgICAgICAgIHRoaXMubXlSb290ID0gY3VyLm5hbWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgIH1cclxuICAgdmlzaXRlZC5wdXNoKGN1cik7XHJcbiAgIGlmIChjdXIubm9ydGggJiYgIXRoaXMuY29udGFpbnModmlzaXRlZCwgY3VyLm5vcnRoKSAmJiB0aGlzLmhhc1Jvb3RSKHZpc2l0ZWQsIGN1ci5ub3J0aCkpIHtcclxuICAgIHJldHVybiB0cnVlOyAgXHJcbiAgfVxyXG4gIGlmIChjdXIuZWFzdCAmJiAhdGhpcy5jb250YWlucyh2aXNpdGVkLCBjdXIuZWFzdCkgJiYgdGhpcy5oYXNSb290Uih2aXNpdGVkLCBjdXIuZWFzdCkpIHtcclxuICAgIHJldHVybiB0cnVlOyAgXHJcbiAgfVxyXG4gIGlmIChjdXIuc291dGggJiYgIXRoaXMuY29udGFpbnModmlzaXRlZCwgY3VyLnNvdXRoKSAmJiB0aGlzLmhhc1Jvb3RSKHZpc2l0ZWQsIGN1ci5zb3V0aCkpIHtcclxuICAgIHJldHVybiB0cnVlOyAgXHJcbiAgfVxyXG4gIGlmIChjdXIud2VzdCAmJiAhdGhpcy5jb250YWlucyh2aXNpdGVkLCBjdXIud2VzdCkgJiYgdGhpcy5oYXNSb290Uih2aXNpdGVkLCBjdXIud2VzdCkpIHtcclxuICAgIHJldHVybiB0cnVlOyAgXHJcbiAgfVxyXG59O1xyXG5cclxuQ3ViZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAoYXJyYXksIG9iaikge1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGFycmF5W2ldID09PSBvYmopIHtcclxuICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICB9ICBcclxuICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuQ3ViZS5wcm90b3R5cGUuZ2V0U2lkZSA9IGZ1bmN0aW9uKHNpZGUpIHtcclxuICAgc3dpdGNoIChzaWRlKSB7XHJcbiAgICAgY2FzZSB0aGlzLkRJUi5OT1JUSDpcclxuICAgICByZXR1cm4gdGhpcy5ub3J0aDtcclxuICAgICBjYXNlIHRoaXMuRElSLkVBU1Q6XHJcbiAgICAgcmV0dXJuIHRoaXMuZWFzdDtcclxuICAgICBjYXNlIHRoaXMuRElSLlNPVVRIOlxyXG4gICAgIHJldHVybiB0aGlzLnNvdXRoO1xyXG4gICAgIGNhc2UgdGhpcy5ESVIuV0VTVDpcclxuICAgICByZXR1cm4gdGhpcy53ZXN0O1xyXG4gIH1cclxuICByZXR1cm4gdW5kZWZpbmVkO1xyXG59O1xyXG5cclxuQ3ViZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgdmFyIHN0cmluZyA9ICcnO1xyXG4gICBzdHJpbmcgKz0gdGhpcy5jb25jYXQoJ25hbWUnLCB0aGlzLm5hbWUpO1xyXG4gICBzdHJpbmcgKz0gdGhpcy5jb25jYXQoJ2lzUm9vdCcsIHRoaXMucm9vdCk7XHJcbiAgIHN0cmluZyArPSB0aGlzLmNvbmNhdCgnbXlSb290JywgdGhpcy5teVJvb3QpO1xyXG4gICBzdHJpbmcgKz0gdGhpcy5jb25jYXQoJ25vcnRoJywgdGhpcy5ub3J0aCAhPSB1bmRlZmluZWQpO1xyXG4gICBzdHJpbmcgKz0gdGhpcy5jb25jYXQoJ2Vhc3QnLCB0aGlzLmVhc3QgIT0gdW5kZWZpbmVkKTtcclxuICAgc3RyaW5nICs9IHRoaXMuY29uY2F0KCdzb3V0aCcsIHRoaXMuc291dGggIT0gdW5kZWZpbmVkKTtcclxuICAgc3RyaW5nICs9IHRoaXMuY29uY2F0KCd3ZXN0JywgdGhpcy53ZXN0ICE9IHVuZGVmaW5lZCk7XHJcbiAgIHJldHVybiBzdHJpbmc7XHJcbn1cclxuXHJcbkN1YmUucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uKHN0cmluZywgdmFsKSB7XHJcbiAgIHJldHVybiBzdHJpbmcgKyAnOiAnICsgdmFsICsgJ1xcbic7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ3ViZTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJ2YXIgQm9vdCA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCb290O1xyXG5cclxuQm9vdC5wcm90b3R5cGUgPSB7XHJcblxyXG4gIHByZWxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgncHJlbG9hZGVyJywgJ2Fzc2V0cy9wcmVsb2FkZXIuZ2lmJyk7XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmdhbWUuaW5wdXQubWF4UG9pbnRlcnMgPSAxO1xyXG5cclxuICAgIGlmICh0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3ApIHtcclxuICAgICAgdGhpcy5nYW1lLnN0YWdlLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1pbldpZHRoID0gIDQ4MDtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1pbkhlaWdodCA9IDI2MDtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heFdpZHRoID0gNjQwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWF4SGVpZ2h0ID0gNDgwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUuZm9yY2VMYW5kc2NhcGUgPSB0cnVlO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLnNldFNjcmVlblNpemUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdQcmVsb2FkZXInKTtcclxuICB9XHJcbn07XHJcbiIsIi8qXHJcbk1haW4gdGVzdGluZyBlbnZpcm9ubWVudC5cclxuKi9cclxuXHJcbnZhciBDdWJlID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvY3ViZScpO1xyXG5cclxudmFyIFV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxuXHJcbnZhciBtb3VzZUJvZHk7IC8vIHBoeXNpY3MgYm9keSBmb3IgbW91c2VcclxuXHJcbnZhciBHYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMudGVzdGVudGl0eSA9IG51bGw7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWU7XHJcblxyXG5HYW1lLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5QMkpTKTtcclxuICAgIHRoaXMuZ2FtZS5waHlzaWNzLnAyLnNldEltcGFjdEV2ZW50cyh0cnVlKTtcclxuICAgIG1vdXNlQm9keSA9IG5ldyBwMi5Cb2R5KCk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG4gICAgdGhpcy5nYW1lLnBoeXNpY3MucDIud29ybGQuYWRkQm9keShtb3VzZUJvZHkpO1xyXG4gICAgdGhpcy5wbGFjZUtleSA9IHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLktleWJvYXJkLlApO1xyXG4gICAgdGhpcy5wbGFjZUtleS5vbkRvd24uYWRkKHRoaXMucGxhY2VDdWJlLCB0aGlzKTtcclxuICAgIFxyXG4gICAgdGhpcy5tb3VzZVggPSAwO1xyXG4gICAgdGhpcy5tb3VzZVkgPSAwO1xyXG4gICAgXHJcbiAgICB0aGlzLmlucHV0Lm9uRG93bi5hZGQodGhpcy5jbGljaywgdGhpcyk7XHJcbiAgICB0aGlzLmlucHV0Lm9uVXAuYWRkKHRoaXMucmVsZWFzZSwgdGhpcyk7XHJcbiAgICB0aGlzLmlucHV0LmFkZE1vdmVDYWxsYmFjayh0aGlzLm1vdmUsIHRoaXMpO1xyXG4gICAgdGhpcy5ncmFiYmVkID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5saW5lID0gbmV3IFBoYXNlci5MaW5lKDAsIDAsIDAsIDApO1xyXG4gICAgXHJcbiAgICB0aGlzLnJvb3RTcGF3bmVkID0gZmFsc2U7XHJcbiAgICBcclxuICAgIHRoaXMuZGVidWdOdW0gPSAwO1xyXG4gICAgdGhpcy5teVJvb3QgPSB1bmRlZmluZWQ7XHJcbiAgICBcclxuICAgICAvLyB2YXIgcG9seWdvblRlc3QgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSg2MCwgNjAsICd0ZXN0c3ByaXRlJyk7XHJcbiAgICAgLy8gdGhpcy5nYW1lLnBoeXNpY3MucDIuZW5hYmxlQm9keShwb2x5Z29uVGVzdCwgdHJ1ZSk7XHJcbiAgICAgLy8gcG9seWdvblRlc3QuYm9keS5jbGVhclNoYXBlcygpO1xyXG4gICAgIC8vIHBvbHlnb25UZXN0LmJvZHkubG9hZFBvbHlnb24oJ21vZHVsZV9waHlzaWNzJywgJ3Rlc3QyJyk7XHJcbiAgfSxcclxuXHJcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy5ncmFiYmVkKSB7XHJcbiAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIodGhpcy5ncmFiYmVkLnNwcml0ZS55IC0gdGhpcy5pbnB1dC5wb3NpdGlvbi55LCB0aGlzLmdyYWJiZWQuc3ByaXRlLnggLSB0aGlzLmlucHV0LnBvc2l0aW9uLngpICsgTWF0aC5QSTtcclxuICAgICAgdmFyIGRpc3QgPSBVdGlscy5kaXN0YW5jZSh0aGlzLmdyYWJiZWQuc3ByaXRlLngsIHRoaXMuZ3JhYmJlZC5zcHJpdGUueSwgdGhpcy5pbnB1dC5wb3NpdGlvbi54LCB0aGlzLmlucHV0LnBvc2l0aW9uLnkpO1xyXG4gICAgICB2YXIgd2VpZ2h0ID0gMTA7XHJcbiAgICAgIHRoaXMuZ3JhYmJlZC5mb3JjZS54ID0gTWF0aC5jb3MoYW5nbGUpICogZGlzdCAqIHdlaWdodDtcclxuICAgICAgdGhpcy5ncmFiYmVkLmZvcmNlLnkgPSBNYXRoLnNpbihhbmdsZSkgKiBkaXN0ICogd2VpZ2h0O1xyXG4gICAgICB0aGlzLmxpbmUuc2V0VG8odGhpcy5ncmFiYmVkLnNwcml0ZS54LCB0aGlzLmdyYWJiZWQuc3ByaXRlLnksIHRoaXMuaW5wdXQucG9zaXRpb24ueCwgdGhpcy5pbnB1dC5wb3NpdGlvbi55KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICB0aGlzLmxpbmUuc2V0VG8oMCwgMCwgMCwgMCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBcclxuICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2FtZS5kZWJ1Zy5nZW9tKHRoaXMubGluZSk7XHJcbiAgfSxcclxuXHJcbiAgY2xpY2s6IGZ1bmN0aW9uIChwb2ludGVyKSB7XHJcbiAgICB2YXIgYm9kaWVzID0gdGhpcy5nYW1lLnBoeXNpY3MucDIuaGl0VGVzdChwb2ludGVyLnBvc2l0aW9uKTtcclxuICAgIGlmIChib2RpZXMubGVuZ3RoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZ3JhYmJlZCA9IGJvZGllc1swXS5wYXJlbnQ7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5ncmFiYmVkLnNwcml0ZS50b1N0cmluZygpKTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIHJlbGVhc2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICBpZiAodGhpcy5ncmFiYmVkKSB7XHJcbiAgICAgICAgdGhpcy5ncmFiYmVkID0gdW5kZWZpbmVkO1xyXG4gICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIG1vdmU6IGZ1bmN0aW9uIChwb2ludGVyKSB7XHJcbiAgICAvLyBwMiB1c2VzIGRpZmZlcmVudCBjb29yZGluYXRlIHN5c3RlbSwgc28gY29udmVydCB0aGUgcG9pbnRlciBwb3NpdGlvbiB0byBwMidzIGNvb3JkaW5hdGUgc3lzdGVtXHJcbiAgICBtb3VzZUJvZHkucG9zaXRpb25bMF0gPSB0aGlzLmdhbWUucGh5c2ljcy5wMi5weG1pKHBvaW50ZXIucG9zaXRpb24ueCk7XHJcbiAgICBtb3VzZUJvZHkucG9zaXRpb25bMV0gPSB0aGlzLmdhbWUucGh5c2ljcy5wMi5weG1pKHBvaW50ZXIucG9zaXRpb24ueSk7XHJcbiAgICB0aGlzLm1vdXNlWCA9IHBvaW50ZXIucG9zaXRpb24ueDtcclxuICAgIHRoaXMubW91c2VZID0gcG9pbnRlci5wb3NpdGlvbi55O1xyXG4gIH0sXHJcbiAgXHJcbiAgcGxhY2VDdWJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZW50aXR5ID0gbmV3IEN1YmUodGhpcy5nYW1lLCB0aGlzLm1vdXNlWCwgdGhpcy5tb3VzZVkpO1xyXG4gICAgdmFyIHNjYWxlID0gMC41O1xyXG4gICAgZW50aXR5Lm5hbWUgPSB0aGlzLmRlYnVnTnVtKys7XHJcbiAgICBlbnRpdHkuc2NhbGUueCA9IHNjYWxlO1xyXG4gICAgZW50aXR5LnNjYWxlLnkgPSBzY2FsZTtcclxuICAgIGVudGl0eS5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG4gICAgdGhpcy5nYW1lLnBoeXNpY3MucDIuZW5hYmxlKGVudGl0eSk7XHJcbiAgICBlbnRpdHkuYm9keS5vbkJlZ2luQ29udGFjdC5hZGQoZW50aXR5LmN1YmVDb2xsaWRlLCBlbnRpdHkpO1xyXG4gICAgZW50aXR5LmJvZHkuZGFtcGluZyA9IDAuOTtcclxuICAgIGVudGl0eS5ib2R5LmFuZ3VsYXJEYW1waW5nID0gMC45O1xyXG4gICAgaWYgKCF0aGlzLnJvb3RTcGF3bmVkKSB7XHJcbiAgICAgICBlbnRpdHkucm9vdCA9IHRydWU7XHJcbiAgICAgICB0aGlzLnJvb3RTcGF3bmVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBNZW51ID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMudGV4dCA9IG51bGw7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1lbnU7XHJcblxyXG5NZW51LnByb3RvdHlwZSA9IHtcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgeCA9IHRoaXMuZ2FtZS53aWR0aCAvIDI7XHJcbiAgICB2YXIgeSA9IHRoaXMuZ2FtZS5oZWlnaHQgLyAyO1xyXG5cclxuICAgIHZhciBzdHlsZSA9IHsgZm9udDogJzY1cHggQXJpYWwnLCBmaWxsOiAnI2ZmZmZmZicsIGFsaWduOiAnY2VudGVyJyB9O1xyXG5cclxuICAgIHRoaXMudGV4dCA9IHRoaXMuYWRkLnRleHQoeCAtIDMwMCwgeSAtIDIwMCwgJ1ByZXNzIHRvIFN0YXJ0Jywgc3R5bGUpO1xyXG5cclxuICAgIHRoaXMuaW5wdXQub25Eb3duLmFkZCh0aGlzLm9uRG93biwgdGhpcyk7XHJcbiAgfSxcclxuXHJcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgfSxcclxuXHJcbiAgb25Eb3duOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQocGxheWVyU3RhdGUuY3VycmVudExldmVsKTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcbiAgfVxyXG59O1xyXG4iLCJ2YXIgUHJlbG9hZGVyID0gZnVuY3Rpb24gKGdhbWUpIHtcclxuICBnYW1lID0gbnVsbDtcclxuICB0aGlzLmFzc2V0ID0gbnVsbDtcclxuICB0aGlzLnJlYWR5ID0gZmFsc2U7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByZWxvYWRlcjtcclxuXHJcblByZWxvYWRlci5wcm90b3R5cGUgPSB7XHJcblxyXG4gIHByZWxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuYXNzZXQgPSB0aGlzLmFkZC5zcHJpdGUoMzIwLCAyNDAsICdwcmVsb2FkZXInKTtcclxuICAgIHRoaXMuYXNzZXQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuXHJcbiAgICB0aGlzLmxvYWQub25Mb2FkQ29tcGxldGUuYWRkT25jZSh0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcclxuICAgIHRoaXMubG9hZC5zZXRQcmVsb2FkU3ByaXRlKHRoaXMuYXNzZXQpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd0ZXN0c3ByaXRlJywgJ2Fzc2V0cy90ZXN0Mi5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5waHlzaWNzKCdtb2R1bGVfcGh5c2ljcycsICdhc3NldHMvbW9kdWxlX3BoeXNpY3MuanNvbicpO1xyXG4gIH0sXHJcblxyXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5hc3NldC5jcm9wRW5hYmxlZCA9IGZhbHNlO1xyXG4gIH0sXHJcblxyXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCEhdGhpcy5yZWFkeSkge1xyXG4gICAgICAvLyB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ01lbnUnKTtcclxuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KHBsYXllclN0YXRlLmN1cnJlbnRMZXZlbCk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG9uTG9hZENvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcclxuICB9XHJcbn07XHJcbiIsInZhciBTcGxhc2ggPSBmdW5jdGlvbiAoKSB7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNwbGFzaDtcclxuXHJcblNwbGFzaC5wcm90b3R5cGUgPSB7XHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgfVxyXG59OyIsIi8qXHJcbkNvbGxlY3Rpb24gb2YgdXRpbGl0eSBmdW5jdGlvbnMuXHJcbiovXHJcblxyXG52YXIgVXRpbHMgPSB7XHJcbiAgICBjb250YWluc09iamVjdDogZnVuY3Rpb24ob2JqLCBsaXN0KSB7XHJcbiAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGxpc3RbaV0gPT09IG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICBkaXN0YW5jZTogZnVuY3Rpb24oeDEsIHkxLCB4MiwgeTIpIHtcclxuICAgICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coeDEgLSB4MiwgMikgKyBNYXRoLnBvdyh5MSAtIHkyLCAyKSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFV0aWxzOyJdfQ==
>>>>>>> origin/gh-pages
